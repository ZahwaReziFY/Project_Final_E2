<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Home | CINELOG</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background:#0f172a;
  color:white;
}

/* NAV */
.navbar{
  background:linear-gradient(to right,#000,#111);
}

/* HERO */
.hero{
  background:url("https://images.unsplash.com/photo-1517602302552-471fe67acf66?auto=format&fit=crop&w=1920&q=80");
  background-size:cover;
  background-repeat:no-repeat;
  background-position:center;
  height:70vh;
  position:relative;
}

.hero::after{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(
    to bottom,
    rgba(0,0,0,.3),
    rgba(0,0,0,.9)
  );
}

.hero-content{
  position:absolute;
  bottom:40px;
  left:40px;
  z-index:2;
}

/* CARD */
.movie-card{
  background:rgba(17,24,39,.95);
  border-radius:16px;
  overflow:hidden;
  transition:.3s;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 10px 30px rgba(0,0,0,.6);
  backdrop-filter: blur(6px);
}

.movie-card:hover{
  transform:translateY(-8px) scale(1.03);
  box-shadow:0 20px 50px rgba(0,0,0,.9);
}

/* POSTER */
.movie-img{
  height:260px;
  object-fit:cover;
}

/* TEXT */
.genre{
  font-size:12px;
}

/* GRID GAP */
.row{
  row-gap:25px;
}

/* ACTION BUTTONS */
.card-actions{
  margin-top:10px;
  display:flex;
  justify-content:space-between;
}

.card-actions form{
  display:inline;
}
</style>
</head>

<body>

<nav class="navbar navbar-dark px-4">
  <span class="navbar-brand fw-bold">üé¨ CINELOG</span>

  <div>
    <a href="/add-movie" class="btn btn-primary btn-sm">+ Tambah Film</a>
    <a href="/logout" class="btn btn-danger btn-sm">Logout</a>
  </div>
</nav>

<div class="hero mb-4">
  <div class="hero-content">
    <h1 class="fw-bold">Selamat Datang di CINELOG</h1>
    <p>Koleksi Film Favoritmu ala Netflix üé•</p>
  </div>
</div>

<div class="container">

<h4 class="mb-4">üéûÔ∏è Daftar Film</h4>

<div class="row">

<% movies.forEach(m => { %>

<div class="col-md-3">
  <div class="movie-card">

    <img 
      src="<%= m.poster || 'https://via.placeholder.com/300x450' %>" 
      class="w-100 movie-img">

    <div class="p-3">
      <h6 class="fw-bold">
        <a href="/movies/<%= m.id %>" class="text-white text-decoration-none">
          <%= m.title %>
        </a>
      </h6>
      <small class="text-secondary"><%= m.year %></small>
      <p class="mb-1 mt-2">‚≠ê <%= m.rating %></p>
      <span class="badge bg-info genre">
        <%= m.genre_name %>
      </span>

      <div class="card-actions">

        <!-- Edit Button -->
        <a href="/movies/<%= m.id %>/edit" class="btn btn-warning btn-sm">Edit</a>

        <!-- Delete Button -->
        <form action="/movies/<%= m.id %>/delete" method="POST" onsubmit="return confirm('Yakin mau hapus film ini?');">
          <button class="btn btn-danger btn-sm">Hapus</button>
        </form>

        <!-- Quick Status Buttons -->
        <form action="/movies/<%= m.id %>/edit" method="POST" style="display:inline;">
          <input type="hidden" name="title" value="<%= m.title %>">
          <input type="hidden" name="year" value="<%= m.year %>">
          <input type="hidden" name="rating" value="<%= m.rating %>">
          <input type="hidden" name="category_id" value="<%= m.category_id %>">
          <input type="hidden" name="status" value="Watched">
          <button class="btn btn-success btn-sm">Watched</button>
        </form>

        <form action="/movies/<%= m.id %>/edit" method="POST" style="display:inline;">
          <input type="hidden" name="title" value="<%= m.title %>">
          <input type="hidden" name="year" value="<%= m.year %>">
          <input type="hidden" name="rating" value="<%= m.rating %>">
          <input type="hidden" name="category_id" value="<%= m.category_id %>">
          <input type="hidden" name="status" value="Watching">
          <button class="btn btn-primary btn-sm">Watching</button>
        </form>

        <form action="/movies/<%= m.id %>/edit" method="POST" style="display:inline;">
          <input type="hidden" name="title" value="<%= m.title %>">
          <input type="hidden" name="year" value="<%= m.year %>">
          <input type="hidden" name="rating" value="<%= m.rating %>">
          <input type="hidden" name="category_id" value="<%= m.category_id %>">
          <input type="hidden" name="status" value="Plan to Watch">
          <button class="btn btn-secondary btn-sm">Plan</button>
        </form>

      </div>
    </div>

  </div>
</div>

<% }) %>

</div>
</div>

</body>
</html>
